using static System.Windows.Forms.DataFormats;

namespace Catapult_Simulator
{
    public partial class Form1 : Form
    {
        private string logHistory = "--- Catapult Launch Log ---\n";
        public Form1()
        {
            InitializeComponent();
        }

        private void Watermelon_Click(object sender, EventArgs e)
        {
            Random rand = new Random();

            // 1. Generate Random Distances (in meters)
            int targetDistance = rand.Next(50, 201);    // Target is between 50 and 200m
            int distanceTraveled = rand.Next(30, 221); // Shot flies between 30 and 220m

            // 2. Determine Hit or Miss
            // We'll give a "hit" a margin of error (e.g., within 5 meters)
            int marginOfError = 5;
            int difference = distanceTraveled - targetDistance;
            bool isHit = Math.Abs(difference) <= marginOfError;

            // 3. Construct the Message
            string resultMessage = $"Target Distance: {targetDistance}m\n" +
                                   $"Object Traveled: {distanceTraveled}m\n";

            if (isHit)
            {
                resultMessage += "RESULT: Direct Hit! 🎯";
            }
            else
            {
                string direction = difference > 0 ? "over-shot" : "fell short";
                resultMessage += $"RESULT: Missed! You {direction} by {Math.Abs(difference)}m.";
            }

            // 4. Output to UI
            label4.Text = resultMessage;
            logHistory += resultMessage + "\n------------------\n";
        }

        private void Bolder_Click(object sender, EventArgs e)
        {
            Random rand = new Random();

            // 1. Generate Random Distances (in meters)
            int targetDistance = rand.Next(50, 200);    // Target is between 50 and 200m
            int distanceTraveled = rand.Next(30, 220); // Shot flies between 30 and 220m

            // 2. Determine Hit or Miss
            // We'll give a "hit" a margin of error (e.g., within 5 meters)
            int marginOfError = 50;
            int difference = distanceTraveled - targetDistance;
            bool isHit = Math.Abs(difference) <= marginOfError;

            // 3. Construct the Message
            string resultMessage = $"Target Distance: {targetDistance}m\n" +
                                   $"Object Traveled: {distanceTraveled}m\n";

            if (isHit)
            {
                resultMessage += "RESULT: Direct Hit! 🎯";
            }
            else
            {
                string direction = difference > 0 ? "over-shot" : "fell short";
                resultMessage += $"RESULT: Missed! You {direction} by {Math.Abs(difference)}m.";
            }

            // 4. Output to UI
            label4.Text = resultMessage;
            logHistory += resultMessage + "\n------------------\n";
        }

        

        private void Pie_Click(object sender, EventArgs e)
        {
            Random rand = new Random();

            // 1. Generate Random Distances (in meters)
            int targetDistance = rand.Next(50, 200);    // Target is between 50 and 200m
            int distanceTraveled = rand.Next(30, 220); // Shot flies between 30 and 220m

            // 2. Determine Hit or Miss
            // We'll give a "hit" a margin of error (e.g., within 5 meters)
            int marginOfError = 2;
            int difference = distanceTraveled - targetDistance;
            bool isHit = Math.Abs(difference) <= marginOfError;

            // 3. Construct the Message
            string resultMessage = $"Target Distance: {targetDistance}m\n" +
                                   $"Object Traveled: {distanceTraveled}m\n";

            if (isHit)
            {
                resultMessage += "RESULT: Direct Hit! 🎯";
            }
            else
            {
                string direction = difference > 0 ? "over-shot" : "fell short";
                resultMessage += $"RESULT: Missed! You {direction} by {Math.Abs(difference)}m.";
            }

            // 4. Output to UI
            label4.Text = resultMessage;
        }

private void Clear_Click(object sender, EventArgs e)
        {
            label4.Text = "";
        }
        private void LogMenu_Click(object sender, EventArgs e)
        {
            // Create the log form and pass the current history to it
            Launch_Outcome logWindow = new Launch_Outcome(logHistory);

            // ShowDialog makes it a pop-up that you must close to return to the game
            logWindow.ShowDialog();
        }
    }
}
